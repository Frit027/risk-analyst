{% extends 'base.html' %}

{% block title %}Документы{% endblock %}
{% block javascript %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{% endblock %}

{% block body %}
    <div id="header">
        <h1>
            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg">Статистика</a>
            <a href="{{ url_for('documents_page') }}" class="btn btn-primary btn-lg">Поиск Дела</a><br>
        </h1>
    </div>

    <div id="sidebar">
        <form method="post" action="{{ url_for('documents_page') }}">
            <div id="select-block">
                <p><b>Категория</b></p>
                <select id="select-category" name="cat_ids" class="form-select" size="15" aria-label="size 15 select example" multiple>
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select><br>
                <button id="clear_selected_category" class="btn btn-info index" type="button">
                    Очистить выбор
                </button>
            </div>

            <div id="select-block">
                <p><b>Требование</b></p>
                <select id="select-req" name="req_ids" class="form-select" size="15" aria-label="size 15 select example" multiple>
                    {% for req in requirements %}
                        <option value="{{ req.id }}">{{ req.name }}</option>
                    {% endfor %}
                </select><br>
                <button class="btn btn-info index" onclick="$('#select-req').prop('selectedIndex', -1);" type="button">
                    Очистить выбор
                </button>
            </div>

            <div id="select-block">
                <p><b>Обстоятельства</b></p>
                <select id="select-cond" name="cond_ids" class="form-select" size="15" aria-label="size 15 select example" multiple>
                    {% for cond in conditions %}
                        <option value="{{ cond.id }}">{{ cond.name }}</option>
                    {% endfor %}
                </select><br>
                <button class="btn btn-info index" onclick="$('#select-cond').prop('selectedIndex', -1);" type="button" >
                    Очистить выбор
                </button>
            </div>

            <div id="select-block">
                <p><b>Решение</b></p>
                <select id="select-solution" name="sol_ids" class="form-select" size="3" aria-label="size 3 select example" multiple>
                    {% for solution in solutions %}
                        <option value="{{ solution.id }}">{{ solution.name.capitalize() }}</option>
                    {% endfor %}
                </select><br>
                <button class="btn btn-info index" onclick="$('#select-solution').prop('selectedIndex', -1);" type="button" >
                    Очистить выбор
                </button>
            </div>

            <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                    <button id="searchButton" type="submit" class="btn btn-success btn-lg">Найти</button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-info btn-lg">Статистика</button><br>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Third group">
                    <button type="button" class="btn btn-secondary btn-lg"> Очистить поля </button><br>
                </div>
            </div>
        </form>
    </div>

    <div id="content">
        <div class= "container">
            <ul class="list-group">
                {% for doc in docs %}
                    <li>{{ doc.id }}</li>
                    <li class='list-group-item'>
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">
                                <a href="{{ url_for('document_page', doc_id=doc.id.replace('/', '_')) }}">
                                    {{ doc.id }}
                                </a>
                            </h5>
                        </div>
                        <p class="mb-1">{{ doc.req_detail }}</p>
                        <p class="mb-1">{{ doc.cond_detail }}</p>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <script type="text/javascript" src="{{ url_for('static', filename='js/fill_selects.js') }}"></script>
{% endblock %}